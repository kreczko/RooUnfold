History of RooUnfold     $Id: History,v 1.45 2010-01-22 15:48:33 adye Exp $
====================

Tim Adye         22-Jan-2010 V00-02-00
Tim Adye         22-Jan-2010 tja100122a
  o RooUnfold::PrintTable: fix bin numbering (no under/overlow) and show 2D/3D
    bin numbers.
  o RooUnfoldBayes: fix if there are fewer measured than truth bins.
  o RooUnfoldTest3D: show X, Y, and Z profile plots for pulls.
  o Remove RooUnfoldTest() routines with numeric parameters.
  o Reorder RooUnfoldTestHarness routines.

Tim Adye         21-Jan-2010 tja100121a
  RooUnfoldTest changes:
  o Change xlo:xhi etc ranges to 0:10
  o New parameters mtrainx, wtrainx, mtestx, wtestx (and for y, z) specify PDFs.
    Background fraction parameters renamed btrainx and btestx (and for y, z).
  o effxlo, effxhi, xbias, xsmear can be specified separately for y and z.
  o New parameter dosmear.
  o Rotation is about the central point, not (0,0).
  o Nicer defaults for 2D and 3D cases.
  o Add simple exponential background PDF. Take tau from mean parameter
    (also for exponential+Gaussian).
  o Fix no-RooFit exponential PDF (only generates in xlo:xhi).

Tim Adye         20-Jan-2010 tja100120d
  o Fix RooUnfold::PrintTable() for multi-dimensional case.
  o Tidy some default object names.

Tim Adye         20-Jan-2010 tja100120c
  RooUnfoldTest changes:
  o Use flat training PDF by default.
  o No-RooFit PDFs now handle flat PDFs and background. exp+resonance PDF fixed.
  o Show test input histograms even if unfolding fails.

Tim Adye         20-Jan-2010 tja100120b
  o RooUnfold::PrintTable() doesn't show residuals and pulls for "empty" bins
    (both content=0 and error=0) and doesn't include in chi^2.
  RooUnfoldTest changes:
  o Reorganise including of examples/*.icc. Disabled with NOINLINE.
  o Smearing function parameters can now be specified as efflo, effhi, bias,
    smear, rotxy, rotxz, and rotyz.
  o Rot() now does a proper rotation rather than mixing.
  o Residuals and pulls histograms now calculated the same for 1D,2D,3D and
    ignore "empty" bins.

Tim Adye         20-Jan-2010 tja100120a
  o Fixes for older versions of ROOT (eg. 5.12).

Tim Adye         19-Jan-2010 tja100119c
  o RooUnfoldSvd may not work very well for multi-dimensional distributions,
    so print warning if it's tried.
  o Protect against /0 error in RooUnfoldBayesImpl::train.
  o More detailed RooUnfoldTest help.
  o RooUnfoldTest PDFs include constant background (currently only with RooFit).
  o Longer RooUnfoldTest canvas.
  o RooUnfoldTest works in CINT again.

Tim Adye         19-Jan-2010 tja100119b
  o Tidy up comments.

Tim Adye         19-Jan-2010 tja100119a
  o New RooUnfoldTestHarness2D inherits from RooUnfoldTestHarness and
    RooUnfoldTestHarness3D inherits from that.
  o Arguments now parsed with examples/ArgVars.
  o RooUnfoldTest(2D,3D) can now have separate ntx, nty, ntz, nmx, nmy, nmz.

Tim Adye         13-Jan-2010 tja100113a
  o Small reorganisation of RooUnfoldBayesImpl. User no longer calls train()
    or trainBinByBin() directly. This is now done in unfold() or
    unfoldBinByBin() (which specify the unfolding algorithm parameters,
    iterations and smoothit), since the training now requires the unfolding
    input. Of course users of RooUnfoldBayes and RooUnfoldBinByBin won't see any
    difference, since they wrap RooUnfoldBayesImpl.
  o RooUnfoldTest uses new RooUnfoldTestHarness object to run tests and keeps
    all test parameters, so we don't have to pass them everywhere.
  o New RooUnfoldTest onepage parameter.
  o RooUnfoldTest -h or --help displays defaults.

Tim Adye         12-Jan-2010 tja100112a
  o RooUnfoldBayesImpl::train should use data input rather than MC input for
    n(Ej). This is _nEstj[] rather _nEj[]. This means that setupUnfold() must
    be called before train() - maybe these routines need tidying up.
    Problem reported Jan Kapitan.
  o RooUnfoldBayesImpl::train should normalise _nCi to 1 for the initial P0(C)
    rather than Nobs.
  o RooUnfoldBayesImpl::train: remove redundent TStopwatch timer.
  o RooUnfoldBayesImpl::getCovariance option doUnfoldSystematic to enable
    systematic calculation. It remains disabled by default: I'm not sure it is
    correct, it is very slow, and the effect should be small with good MC
    statistics.
  o RooUnfold::PrintTable fixed for _nm!=_nt. Print test truth (hTrue), which
    is now optional.
  o RooUnfoldTest(2D,3D) can now be run with parameters specified by name, not
    just positional. Eg. RooUnfoldTest regparm=6 or RooUnfoldTest("regparm=6")
    from the ROOT prompt.

Tim Adye         11-Jan-2010 tja100111a
  o Move RooUnfoldBayesImpl.cxx description to top of file and tidy.
  o Remove unneccessary vector copy.

Tim Adye         22-Dec-2009 tja091222a
  o RooUnfoldTest2D: fix 2D rotation.
  o Add RooUnfoldTest3D.cxx.

Tim Adye         14-Oct-2009 V00-01-09
Tim Adye         24-Aug-2009 tja090824a
  o Fixes for GCC 4.3.3, suggested by Ioana Maris.

Tim Adye          5-Jun-2009 tja090612a
  o RooUnfold::PrintTable prints a table of the results and Chi^2/NDF
    (moved from RooUnfoldTest).
  o RooUnfoldTest prints RooUnfold object.
  o Fix assignment of RooUnfold derived classes.
  o Don't repeat RooUnfold::Setup when constructing derived classes.
  o Fix RooUnfoldBinByBin construction, which was actually doing the
    RooUnfoldBayes setup.
  o Add missing RooUnfoldBinByBin constructors.
  o Add make VERBOSE=1 to display compilation commands.

Tim Adye          5-Jun-2009 tja090605a
  o bin-by-bin was actually running the full bayes code.
  o SVD prints error if kterm is negative or greater than the number of bins.
  o Tidy up some includes and namespaces in RooUnfoldBayesImpl.cxx and
    RooUnfoldTest.cxx.
  o RooUnfoldTest can test different numbers of bins in truth and measured
    distributions.
  o RooUnfoldTest prints a table of the results (not in cint) and Chi^2/NDF.

Tim Adye         26-May-2009 tja090527a
  o Allow weight to be specified with RooUnfoldResponse::Fill() and Miss().
    Defaults to 1.0, so no change if not specified.

Tim Adye         26-May-2009 tja090526a
  o RooUnfoldResponse::Fill() and Miss() fix for variable binning in 1D case.
    Use case highlighted by Seth Zenz.

Tim Adye         22-May-2009 V00-01-08
  o Add RooUnfoldResponse::ApplyToTruth based on idea and code from
    Seth Zenz.

Tim Adye         22-May-2009 V00-01-07
Tim Adye         10-Oct-2008
  o Don't calculate covariance matrix unless required. This can be a slow
    operation for the Bayes algorithm. RooUnfoldBayesImpl does not call
    getCovariance after unfolding - now done automatically in RooUnfoldBayes.
  o Fix conversion of multi-dimensional distributions to 1D (for use in response
    matrix and in Bayes algorithm). Under/overflow bins are ignored.
    RooUnfoldResponse::GetBin and FindBin convert from and to a vector index.
  o Fix RooUnfoldTestPdfRooFit's double-sided exponential distribution.
    No longer gives warnings about out-of-range values.
  o RooUnfoldTest2D only calculates errors with the Bayes algorithm
    for <=25 bins. It takes a long time for more bins (goes as the 4th power
    of the number of bins).

Tim Adye         28-Aug-2008 tja080828a
  o New routine RooUnfold::GetBin returns global bin for multi-dimensional
    histogram corresponding to vector index. This fixes RooUnfold::Hreco and
    RooUnfoldBayes::H2VD. Bug reported by Peter Waller.

Tim Adye         19-Aug-2008 V00-01-06
  o Copy updated setmax (just name and comments) and smear to RooUnfoldTest2D.

Tim Adye         14-Aug-2008 tja080814a
  o Fix inefficiency simulation in RooUnfoldTest. Now goes from 0.3 at low x
    to 1 at high x as before.

Fergus Wilson    14-Aug-2008 ffw140808a
  o Bayesian Systematc error calculation due to unfolding matrix
    disabled while investigate normalisation.

Tim Adye          6-Aug-2008 tja080813b
  o Add missing include file to RooUnfoldTest.
  o Fix for onepage==3.

Tim Adye          6-Aug-2008 tja080813a
  o Removed $ROOTSYS fallback in Makefile. That wouldn't work because
    $ROOTSYS/test/Makefile.arch would have already exited.

Fergus Wilson    13-Aug-2008 ffw130808c
  o Improved version of the Bayesian systematc error calculation.
  o Bayesian Systematic error calculation no longer done during
    training/testing.

Fergus Wilson    13-Aug-2008 ffw130808b
  o Remember to remove debug code.

Fergus Wilson    13-Aug-2008 ffw130808a
  o speeded up Bayesian covariance matrix at least factor two.

Fergus Wilson    13-Aug-2008 ffw130808
  o Changed smear method so it now works for different x-axis ranges.
    Efficiency correctly goes from 1.0 at low x to 0.3 at high x; shift is
    10% of the range; smearing is now 1 bin width.
  o RooUnfoldTest: change colors and markers to use names rather than numbers.
    Added a pulls histogram; Draw a line at y=0 on residual plot; added simple
    checking of some command line parameters.
  o RooUnfoldTestPdf: added a new distribution of exponential decaying
    background and a resonance (i.e. Higgs-like).
  o RooUnfoldBayesImpl: added a chi^2 method. Added 1-D smoothing. Speeded
    up covarinace matrix.

Tim Adye          6-Aug-2008 tja080806a
  o Get include directory from root-config --incdir as suggested by
    Peter Waller.
  o More robust GNUmakefile. If $ROOTSYS/test/Makefile.arch doesn't exist, it
    gets settings from root-config. If that doesn't exist, it assumes everything
    is below $ROOTSYS in the standard places. These fallbacks probably won't
    work on anything except Linux.
  o Use -lRooFitCore if available (seems to be needed with ROOT 5.18 Cygwin).
  o Use make ROOTBUILD=debug for debug build.
  o Use make commands to see compiler options to be used.

Tim Adye         23-Jan-2008 V00-01-05
  o Include missing headers for ROOT 5.16/00.
  o Fix RooUnfoldTest2D.ps file name.
  o Rename RooUnfoldSvd's tau parameter to kterm to match Hoecker and
    Kartvelishvili's usage (they use k for the last term used in the expansion).

Tim Adye          2-Aug-2007 V00-01-04
Kerstin Tackmann 28-Jul-2007 kt072807
  RooUnfHistoSvd improvements:
  o Replace use of copy constructors by use of Clone. This should get rid of the
    segfaults that Jochen has been seeing.
  o Fixed bug in TUnfHisto::GetCov that could lead to small numerical changes in
    the estimated uncertainties.
  o Tested on my spectrum that the changes, which were supposed to be only
    clean-up between the previous two tags (Tim's and mine), do indeed give
    identical results on the curvature of the weight distributions and the
    errors.

Tim Adye          5-Apr-2007 V00-01-03
  o Fixes to build on Solaris.

Tim Adye          5-Apr-2007 V00-01-02
  o By default, build test programs with static RooUnfold library,
    so don't need to set LD_LIBRARY_PATH.
  o Only link programs that need RooFit against RooFit.
  o Default NOROOFIT=1 if RooFit is not available.
  o Move README examples to the web page.

Tim Adye          4-Apr-2007 V00-01-01
  o Combine RooUnfHistoSvd and RooUnfold into a single stand-alone package.
  o Rewritten standalone GNUMakefile.
  o Combined History entries below.

Tim Adye         14-Nov-2006 tja061114a
  o Use TVectorDfwd.h in ROOT5

Kerstin Tackmann 15-Aug-2006 kt071506
  o RooUnfHistoSvd: Clean up of code, mostly in the form of getting rid of the
    many many couts and the GetBias methods, which where not working the way we
    wanted (technically they were, but they did not turn out useful to estimate
    the bias).

Tim Adye          9-Aug-2006 tja060809a
  o Allow zero regularisation parameter in RooUnfoldTest.cc.
  o Simpler pad selection in 2-up display RooUnfoldTest.cc.

Tim Adye         15-Dec-2005 tja051215a
  o Fix some typos in comments
  o Add reference to pre-built ROOT docs to README

Tim Adye         12-Dec-2005 V00-00-03
  o Add RooUnfoldExample.cc.
  o Use Int_t consistently in test routines.
  o Tidy up README.

Tim Adye         12-Dec-2005 V00-00-01
  o First RooUnfold version with Bayes, SVD, and bin-by-bin methods.

Tim Adye         12-Dec-2005 tja051212a
  o Initialise all RooUnfHistoSvd member variables on object creation.
  o Allow TUnfHisto::init caller to disable creation of results file.
  o Add GNUmakefile to allow also building outside BaBar environment.

Kerstin Tackmann 22-Nov-2005 kt221105
  o RooUnfHistoSvd: fixed the tau==25 problem

Tim Adye         18-Nov-2005 tja051118a
  RooUnfHistoSvd tweaks:
  o Declare method parameters "const" where appropriate.
  o Declare methods const or static where appropriate.
  o Pass vectors and matrices by const reference, rather than by value.
  o Don't forget to delete a few new'ed objects.

Kerstin Tackmann 30-Sep-2005 kt093005
  RooUnfHistoSvd improvements:
  o Much better use of memory
  o Fixed bug in GetBias
  o Commented the GetBias methods out to make sure people are aware that they
    should be more carefully tested on specific spectra than the general
    unfolding...

Kerstin Tackmann 15-Dec-2004 KT121504
  o RooUnfHistoSvd: Initial commit of current code
